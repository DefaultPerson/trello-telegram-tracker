# Product Requirements Document (PRD)
## Trello Telegram Tracker Bot

### Project Overview
**Product Name:** Trello Telegram Tracker Bot
**Type:** Telegram Bot –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å–æ–∫ Trello
**Language:** Python 3.12+
**Architecture:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Core Purpose
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –ø–æ –¥–æ—Å–∫–∞–º Trello —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ—Ç—á–µ—Ç–∞–º–∏.

### Key Features

#### 1. Real-time Monitoring
- **Card Completion Tracking:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
- **Member Assignment Notifications:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–∞ –∑–∞–¥–∞—á–∏
- **Long-running Task Detection:** –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á –≤ —Ä–∞–±–æ—Ç–µ –±–æ–ª–µ–µ 3 –¥–Ω–µ–π (üêå)
- **Continuous Monitoring:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

#### 2. Automated Reporting
- **Daily Reports:** –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (–ø–Ω-—Å–± –≤ 8:00) —Å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–º–∏ –∏ —Ç–µ–∫—É—â–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏
- **Weekly Statistics:** –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø–Ω –≤ 00:00) —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏
- **Report Pinning:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ä—ã—Ö

#### 3. Interactive Commands
- `/start` - –°–ø—Ä–∞–≤–∫–∞ –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- `/ct` - –¢–µ–∫—É—â–∏–π –æ—Ç—á–µ—Ç –ø–æ –≤—Å–µ–º –¥–æ—Å–∫–∞–º
- `/wr` - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/mt` - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/stored` - –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `/unpin MESSAGE_ID` - –û—Ç–∫—Ä–µ–ø–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `/clear_stored` - –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `/debug_file` - –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª —Ö—Ä–∞–Ω–µ–Ω–∏—è

#### 4. User Management
- **Trello-Telegram Mapping:** –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Trello —Å Telegram username
- **Personal Task Views:** –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ –∑–∞–¥–∞—á–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Tag Notifications:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

### Technical Architecture

#### Core Components
1. **AsyncTrelloBot** (`bot.py`) - –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞ —Å aiogram
2. **TrelloAPI** (`trello_api.py`) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Trello API
3. **CommandHandlers** (`handlers.py`) - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
4. **ReportGenerator** (`reports.py`) - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
5. **Storage** (`storage.py`) - –†–∞–±–æ—Ç–∞ —Å JSON —Ñ–∞–π–ª–∞–º–∏
6. **Scheduler** (`scheduler.py`) - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
7. **Config** (`config.py`) - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

#### Technology Stack
- **Python 3.12+** - –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **aiogram 3.21+** - Telegram Bot framework
- **aiohttp 3.9+** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- **aiofiles 24.1+** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
- **schedule 1.2+** - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- **Poetry** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

#### Data Storage
- **JSON Files:** –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **In-Memory State:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ—Å–æ–∫
- **Persistent Tracking:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á

### Configuration Requirements

#### Required Settings
- `TELEGRAM_API_TOKEN` - –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `PEER_ID` - ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
- `TRELLO_API_KEY` - API –∫–ª—é—á Trello
- `TRELLO_TOKEN` - –¢–æ–∫–µ–Ω Trello
- `board_ids` - –°–ø–∏—Å–æ–∫ ID –¥–æ—Å–æ–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### User Mappings
- `trello_to_telegram_users` - –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Trello ‚Üí Telegram
- `done_list_names` - –ù–∞–∑–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ "–≤—ã–ø–æ–ª–Ω–µ–Ω–æ"
- `in_progress_list_names` - –ù–∞–∑–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ "–≤ —Ä–∞–±–æ—Ç–µ"

